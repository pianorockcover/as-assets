[{"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\RichTextEditor.tsx":"1","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\RichTextEditorTools.tsx":"2","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\toolControls.ts":"3","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\customTheme.ts":"4","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\LinkPicker.tsx":"5","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\icons.ts":"6","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\Comments\\Comment.tsx":"7","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\Comments\\Comments.tsx":"8","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\App.tsx":"9","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\LinkPreview.tsx":"10","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\index.tsx":"11","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\decorators.ts":"12","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\Comments\\generateComment.ts":"13","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\Comments\\getCommentAvatar.ts":"14","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\draftMarkdown.ts":"15"},{"size":4396,"mtime":1606916356859,"results":"16","hashOfConfig":"17"},{"size":3955,"mtime":1606820385766,"results":"18","hashOfConfig":"17"},{"size":1805,"mtime":1606820385788,"results":"19","hashOfConfig":"17"},{"size":267,"mtime":1606820385801,"results":"20","hashOfConfig":"17"},{"size":3661,"mtime":1606820385762,"results":"21","hashOfConfig":"17"},{"size":1021,"mtime":1606820385800,"results":"22","hashOfConfig":"17"},{"size":4684,"mtime":1606919296708,"results":"23","hashOfConfig":"17"},{"size":3628,"mtime":1606919160950,"results":"24","hashOfConfig":"17"},{"size":2976,"mtime":1606916660208,"results":"25","hashOfConfig":"17"},{"size":1794,"mtime":1606820385764,"results":"26","hashOfConfig":"17"},{"size":392,"mtime":1606743270090,"results":"27","hashOfConfig":"17"},{"size":346,"mtime":1606820385779,"results":"28","hashOfConfig":"17"},{"size":654,"mtime":1606893620882,"results":"29","hashOfConfig":"17"},{"size":1517,"mtime":1606918585655,"results":"30","hashOfConfig":"17"},{"size":1202,"mtime":1606820385787,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"15x2xnr",{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"56"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"65"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\RichTextEditor.tsx",["68","69","70"],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\RichTextEditorTools.tsx",[],["71","72"],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\toolControls.ts",[],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\customTheme.ts",[],["73","74"],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\LinkPicker.tsx",["75"],"import { Fade, IconButton, makeStyles } from \"@material-ui/core\";\r\nimport clsx from \"clsx\";\r\nimport { EditorState, RichUtils } from \"draft-js\";\r\nimport React, { ChangeEvent, useCallback, useState } from \"react\";\r\nimport { getIcon } from \"../icons\";\r\n\r\nconst useStyles = makeStyles({\r\n\tlinkPicker: {\r\n\t\ttop: 33,\r\n\t\tleft: 0,\r\n\t\tzIndex: 2,\r\n\t\tposition: \"absolute\",\r\n\t\tbackground: \"#fafdff\",\r\n\t\tborderBottom: \"1px solid #d2d2d2\",\r\n\t\tboxShadow: \"1px 1px 4px 0px #e4e1e1\",\r\n\t\tpadding: 5,\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t\tpaddingLeft: 10,\r\n\t\twidth: \"100%\",\r\n\t},\r\n\tinput: {\r\n\t\tborder: 0,\r\n\t\tborderBottom: \"2px solid #0088bb\",\r\n\t\tmarginRight: 10,\r\n\t\tbackground: \"transparent\",\r\n\t\toutline: \"none !important\",\r\n\t\ttransition: \"border .2s ease-in-out\",\r\n\t\tpaddingTop: 3,\r\n\t\tpaddingBottom: 3,\r\n\t},\r\n\tinputError: {\r\n\t\tborderBottom: \"2px solid #ee1d1d\",\r\n\t},\r\n});\r\n\r\nconst CloseIcon = getIcon(\"Close\")!;\r\nconst CheckIcon = getIcon(\"Check\")!;\r\n\r\ninterface LinkPickerProps {\r\n\t/**\r\n\t * Текущий стейт редактора текстов\r\n\t */\r\n\teditorState: EditorState;\r\n\t/**\r\n\t * Ф-я изменения стейта\r\n\t */\r\n\tsetEditorState: (editorState: EditorState) => void;\r\n\t/**\r\n\t * Ф-я, закрывающая интерфейс редактирования ссылки\r\n\t */\r\n\tcloseLinkPicker: () => void;\r\n}\r\n\r\n/**\r\n * Форма добавления ссылки в расширенном редакторе текстов\r\n *\r\n * @param {LinkPickerProps} props\r\n * @returns {JSX.Element}\r\n */\r\nexport const LinkPicker: React.FC<LinkPickerProps> = ({\r\n\tcloseLinkPicker,\r\n\teditorState,\r\n\tsetEditorState,\r\n}) => {\r\n\tconst classes = useStyles();\r\n\r\n\tlet presetUrl = \"\";\r\n\tconst contentState = editorState.getCurrentContent();\r\n\tconst startKey = editorState.getSelection().getStartKey();\r\n\tconst startOffset = editorState.getSelection().getStartOffset();\r\n\tconst blockWithLinkAtBeginning = contentState.getBlockForKey(startKey);\r\n\tconst linkKey = blockWithLinkAtBeginning.getEntityAt(startOffset);\r\n\r\n\tif (linkKey) {\r\n\t\tconst linkInstance = contentState.getEntity(linkKey);\r\n\t\tpresetUrl = linkInstance.getData().url;\r\n\t}\r\n\r\n\tconst [url, setUrl] = useState<string>(presetUrl);\r\n\tconst [error, setError] = useState<boolean>();\r\n\r\n\tconst onChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\r\n\t\tif (e.target.value) {\r\n\t\t\tsetError(false);\r\n\t\t}\r\n\t\tsetUrl(e.target.value);\r\n\t}, []);\r\n\r\n\tconst saveUrl = useCallback(\r\n\t\t(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif (!url) {\r\n\t\t\t\tsetError(true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst contentState = editorState.getCurrentContent();\r\n\t\t\tconst contentStateWithEntity = contentState.createEntity(\r\n\t\t\t\t\"LINK\",\r\n\t\t\t\t\"MUTABLE\",\r\n\t\t\t\t{ url }\r\n\t\t\t);\r\n\t\t\tconst entityKey = contentStateWithEntity.getLastCreatedEntityKey();\r\n\t\t\tconst newEditorState = EditorState.set(editorState, {\r\n\t\t\t\tcurrentContent: contentStateWithEntity,\r\n\t\t\t});\r\n\r\n\t\t\tsetEditorState(\r\n\t\t\t\tRichUtils.toggleLink(\r\n\t\t\t\t\tnewEditorState,\r\n\t\t\t\t\tnewEditorState.getSelection(),\r\n\t\t\t\t\tentityKey\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tcloseLinkPicker();\r\n\t\t},\r\n\t\t[editorState, url]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Fade in={true}>\r\n\t\t\t<div className={classes.linkPicker}>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Введите URL:\"\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tvalue={url}\r\n\t\t\t\t\tclassName={clsx(classes.input, {\r\n\t\t\t\t\t\t[classes.inputError]: error,\r\n\t\t\t\t\t})}\r\n\t\t\t\t/>\r\n\t\t\t\t<IconButton size=\"small\" onMouseDown={saveUrl}>\r\n\t\t\t\t\t<CheckIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton size=\"small\" onClick={closeLinkPicker}>\r\n\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</div>\r\n\t\t</Fade>\r\n\t);\r\n};\r\n","C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\icons.ts",[],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\Comments\\Comment.tsx",["76"],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\Comments\\Comments.tsx",[],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\App.tsx",[],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\LinkPreview.tsx",["77"],"import { makeStyles } from \"@material-ui/core\";\r\nimport { ContentBlock, ContentState, DraftDecorator } from \"draft-js\";\r\nimport React, { ReactNode } from \"react\";\r\n\r\nconst useStyles = makeStyles({\r\n\tlink: {\r\n\t\tcolor: \"#0088bb\",\r\n\t\ttextDecoration: \"underline\",\r\n\t},\r\n});\r\n\r\ninterface LinkPreviewProps {\r\n\t/**\r\n\t * Название ссылки\r\n\t */\r\n\tchildren?: ReactNode;\r\n\t/**\r\n\t * Адрес ссылки\r\n\t */\r\n\turl?: string;\r\n\t/**\r\n\t * Стейт расширенного редактора текстов\r\n\t */\r\n\tcontentState: ContentState;\r\n\t/**\r\n\t * Id ссылки\r\n\t */\r\n\tentityKey: string;\r\n}\r\n\r\n/**\r\n * Декоратор для отображения ссылок в расширенном редакторе текстов\r\n *\r\n * @param {LinkPreviewProps} props\r\n * @returns {JSX.Element}\r\n */\r\nexport const LinkPreview: React.FC<LinkPreviewProps> = (props) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst { url } = props.contentState.getEntity(props.entityKey).getData();\r\n\r\n\treturn (\r\n\t\t<a className={classes.link} href={url} title={`Ссылка: ${url}`}>\r\n\t\t\t{props.children}\r\n\t\t</a>\r\n\t);\r\n};\r\n\r\n/**\r\n * Ф-я для определения ссылки в стейте Draft.js\r\n *\r\n * @param {ContentBlock} contentBlock - блок с контентом\r\n * @param {Function} callback - callback\r\n * @param {ContentState} contentState - текущий стейт редактора\r\n * @returns {void}\r\n */\r\nexport const findLinkEntities = (\r\n\tcontentBlock: ContentBlock,\r\n\tcallback: (start: number, end: number) => void,\r\n\tcontentState: ContentState\r\n): void =>\r\n\tcontentBlock.findEntityRanges((character) => {\r\n\t\tconst entityKey = character.getEntity();\r\n\t\treturn (\r\n\t\t\tentityKey !== null &&\r\n\t\t\tcontentState.getEntity(entityKey).getType() === \"LINK\"\r\n\t\t);\r\n\t}, callback);\r\n",["78","79"],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\index.tsx",[],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\decorators.ts",[],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\Comments\\generateComment.ts",[],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\Comments\\getCommentAvatar.ts",[],["80","81"],"C:\\Users\\Nikitos\\Documents\\as-assets\\src\\components\\RichTextEditor\\draftMarkdown.ts",[],{"ruleId":"82","severity":1,"message":"83","line":6,"column":2,"nodeType":"84","messageId":"85","endLine":6,"endColumn":8},{"ruleId":"86","severity":1,"message":"87","line":128,"column":53,"nodeType":"88","endLine":128,"endColumn":66,"suggestions":"89"},{"ruleId":"86","severity":1,"message":"90","line":149,"column":6,"nodeType":"88","endLine":149,"endColumn":19,"suggestions":"91"},{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","replacedBy":"95"},{"ruleId":"92","replacedBy":"96"},{"ruleId":"94","replacedBy":"97"},{"ruleId":"86","severity":1,"message":"98","line":120,"column":3,"nodeType":"88","endLine":120,"endColumn":21,"suggestions":"99"},{"ruleId":"86","severity":1,"message":"100","line":146,"column":6,"nodeType":"88","endLine":146,"endColumn":8,"suggestions":"101"},{"ruleId":"82","severity":1,"message":"102","line":2,"column":38,"nodeType":"84","messageId":"85","endLine":2,"endColumn":52},{"ruleId":"92","replacedBy":"103"},{"ruleId":"94","replacedBy":"104"},{"ruleId":"92","replacedBy":"105"},{"ruleId":"94","replacedBy":"106"},"@typescript-eslint/no-unused-vars","'useRef' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useCallback has an unnecessary dependency: 'editorState'. Either exclude it or remove the dependency array.","ArrayExpression",["107"],"React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["108"],"no-native-reassign",["109"],"no-negated-in-lhs",["110"],["109"],["110"],"React Hook useCallback has missing dependencies: 'closeLinkPicker' and 'setEditorState'. Either include them or remove the dependency array. If 'setEditorState' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["111"],"React Hook useEffect has missing dependencies: 'hidden' and 'ref'. Either include them or remove the dependency array.",["112"],"'DraftDecorator' is defined but never used.",["109"],["110"],["109"],["110"],{"desc":"113","fix":"114"},{"desc":"115","fix":"116"},"no-global-assign","no-unsafe-negation",{"desc":"117","fix":"118"},{"desc":"119","fix":"120"},"Update the dependencies array to be: []",{"range":"121","text":"122"},"Update the dependencies array to be: [editorState, props]",{"range":"123","text":"124"},"Update the dependencies array to be: [closeLinkPicker, editorState, setEditorState, url]",{"range":"125","text":"126"},"Update the dependencies array to be: [hidden, ref]",{"range":"127","text":"128"},[2842,2855],"[]",[3331,3344],"[editorState, props]",[3000,3018],"[closeLinkPicker, editorState, setEditorState, url]",[3126,3128],"[hidden, ref]"]